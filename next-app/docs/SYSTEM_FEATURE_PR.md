# BABA廃棄物管理システム - 機能一覧

**Version**: 0.1.0  
**作成日**: 2025年10月19日  
**対象**: クライアント向けPR資料

---

## 📋 目次

1. [システム概要](#システム概要)
2. [主要機能](#主要機能)
3. [管理機能](#管理機能)
4. [データ連携機能](#データ連携機能)
5. [請求・会計機能](#請求会計機能)
6. [レポート・分析機能](#レポート分析機能)
7. [セキュリティ・監査機能](#セキュリティ監査機能)
8. [技術スタック](#技術スタック)

---

## システム概要

BABA廃棄物管理システムは、**産業廃棄物の収集・運搬・処理業務を一元管理**する業務支援システムです。排出事業者、収集運搬業者、処分業者の3者間で発生する複雑な業務フローを効率化し、法令遵守（JWNET連携）と業務の透明性を実現します。

### システムの特徴

- ✅ **マルチロール対応**: 排出事業者、収集業者、管理者の3つの役割で異なるUI/機能を提供
- ✅ **JWNET完全連携**: 電子マニフェストシステムとの自動連携
- ✅ **リアルタイム管理**: 収集予定から実績まで一元管理
- ✅ **自動請求生成**: 収集実績から請求データを自動生成
- ✅ **モバイル対応**: 現場での実績登録をスマートフォンから実施可能

---

## 主要機能

### 1. ダッシュボード

**目的**: 全体の業務状況を一目で把握

**機能**:
- 今月の請求金額の集計表示
- 管理店舗数の表示
- 回収予定件数の表示
- 回収完了件数の表示
- 集計期間の表示
- システム情報カード

**利用者**: 全ユーザー（役割に応じた情報を表示）

---

### 2. 廃棄依頼管理（収集依頼一覧）

**目的**: 排出事業者から収集業者への廃棄物回収依頼を管理

**機能**:
- 廃棄依頼の一覧表示（フィルター・検索機能付き）
- 依頼ステータス管理（未対応/対応中/完了/キャンセル）
- 店舗別・品目別の依頼管理
- 収集業者への依頼割り当て
- 依頼内容の詳細確認

**利用者**: 排出事業者（依頼作成）、管理者（全体管理）

---

### 3. 収集予定管理（Plans）

**目的**: 収集スケジュールの計画・管理

**機能**:
- 収集予定の登録・編集・削除
- カレンダー表示での予定確認
- 店舗別・収集業者別の予定管理
- 収集日時・品目・数量の管理
- 予定の承認フロー
- 収集ルートの最適化支援

**利用者**: 管理者、収集業者

---

### 4. 収集実績登録（Actuals）

**目的**: 実際の収集活動を記録し、証跡を残す

**機能**:
- 収集実績の登録（数量、日時、車両番号、ドライバー名）
- 計量伝票番号の記録
- 現場写真のアップロード（複数枚対応）
- 実績と予定の自動紐付け
- 実績データの承認フロー
- モバイルからの実績登録対応

**利用者**: 収集業者（現場登録）、管理者（承認・確認）

---

### 5. 回収レポート

**目的**: 収集業者が日次で回収実績を報告

**機能**:
- 日次回収レポートの作成
- 回収した廃棄物の詳細記録
- 写真付きレポート
- レポートのPDF出力
- 排出事業者への共有機能

**利用者**: 収集業者

---

## 管理機能

### 6. 組織管理（Organizations）

**目的**: システムを利用する組織（会社）を管理

**機能**:
- 組織情報の登録・編集（会社名、住所、連絡先）
- 組織種別の管理（排出事業者/収集業者/処分業者）
- 組織間の業務提携関係の設定
- 組織の有効/無効管理

**利用者**: システム管理者

---

### 7. ユーザー管理（Users）

**目的**: システム利用者のアカウント管理

**機能**:
- ユーザーアカウントの作成・編集・削除
- ロール（役割）の設定（Admin/Emitter/Collector）
- ユーザーと組織の紐付け
- アクセス権限の管理
- ユーザーの有効/無効管理
- パスワードリセット機能

**利用者**: システム管理者

---

### 8. 店舗管理（Stores）

**目的**: 排出事業者の店舗（廃棄物排出拠点）を管理

**機能**:
- 店舗情報の登録・編集（店舗名、住所、連絡先）
- 店舗コードの管理
- 店舗の営業状態管理
- 店舗別の廃棄物排出実績の確認
- 店舗と収集業者の紐付け

**利用者**: 排出事業者、管理者

---

### 9. 管理店舗（Managed Stores）

**目的**: 排出事業者が管理する店舗の一覧表示

**機能**:
- 自組織の店舗一覧の表示
- 店舗の追加・編集
- 店舗別の統計情報表示

**利用者**: 排出事業者

---

### 10. 収集業者管理（Collectors）

**目的**: 廃棄物の収集運搬を行う業者を管理

**機能**:
- 収集業者情報の登録・編集
- 許可証情報の管理（許可番号、有効期限）
- 対応可能な廃棄物種類の登録
- 収集エリアの設定
- 業者の評価・実績管理
- 業者と店舗の割り当て

**利用者**: 管理者

---

### 11. 店舗-業者割り当て（Store Collector Assignments）

**目的**: 各店舗にどの収集業者が対応するかを設定

**機能**:
- 店舗と収集業者のマッピング管理
- 主担当・副担当の設定
- 対応品目の指定
- 割り当ての有効期限管理
- 一括割り当て機能

**利用者**: 管理者

---

### 12. 品目マップ（Item Maps）

**目的**: 排出事業者の廃棄物品目とJWNET廃棄物コードを紐付け

**機能**:
- 品目名とJWNET廃棄物コードのマッピング
- 店舗別の品目設定
- 品目の有効/無効管理
- 一括インポート機能

**利用者**: 管理者

---

### 13. 廃棄物マスター（Waste Type Masters）

**目的**: 収集業者が扱う廃棄物種類を管理

**機能**:
- 廃棄物種類の登録・編集
- 単価情報の管理
- 処理方法の記録
- 法令区分の管理

**利用者**: 管理者、収集業者

---

## データ連携機能

### 14. JWNET連携

**目的**: 電子マニフェストシステム（JWNET）との自動連携

**機能**:
- JWNETへの自動データ送信
- 電子マニフェストの自動生成
- マニフェスト番号の管理
- 送信履歴の確認
- エラー時の再送信機能

**利用者**: 管理者、自動処理

---

### 15. JWNET登録データ（Registrations）

**目的**: JWNET に登録するデータの管理

**機能**:
- 登録データの作成・編集
- 登録前のバリデーション
- 登録データの一時保存
- 登録ステータスの管理
- 登録履歴の確認

**利用者**: 管理者

---

### 16. JWNET管理

**目的**: JWNET関連の総合管理

**機能**:
- JWNET事業者組み合わせの管理
- 廃棄物コードマスターの管理
- JWNET API連携設定
- 送信エラーの管理・再送信

**利用者**: システム管理者

---

### 17. JWNET事業者組み合わせ

**目的**: 排出→収集→処分の事業者組み合わせパターンを管理

**機能**:
- 3者間の業務関係の登録
- 組み合わせの有効/無効管理
- 許可証情報の確認
- よく使う組み合わせの登録

**利用者**: 管理者

---

### 18. JWNET廃棄物コード

**目的**: JWNET で定義された廃棄物コードのマスターデータ管理

**機能**:
- 廃棄物コードの一覧表示
- コード情報の検索
- コードの説明・分類の表示

**利用者**: 全ユーザー（参照）

---

### 19. Excel/CSV インポート

**目的**: 既存データの一括取り込み

**機能**:
- Excelファイルからのデータインポート
- CSVファイルからのデータインポート
- インポートテンプレートのダウンロード
- データバリデーション
- エラー行の表示・修正
- インポート履歴の管理

**利用者**: 管理者

---

### 20. インポート履歴

**目的**: データインポート実行履歴の管理

**機能**:
- インポート実行履歴の一覧表示
- インポート結果の確認（成功/失敗件数）
- エラーログの確認
- インポートデータのロールバック

**利用者**: 管理者

---

## 請求・会計機能

### 21. 請求管理（Billing）

**目的**: 収集実績に基づく自動請求処理

**機能**:
- **請求明細の自動生成**:
  - 収集実績データから請求明細を自動作成
  - 品目別・店舗別の明細管理
  - 単価×数量の自動計算
- **請求サマリーの作成**:
  - 月次請求サマリーの自動生成
  - 業者別・組織別の集計
  - 税額計算
- **請求書のExcel出力**:
  - 請求データのExcelエクスポート
  - カスタマイズ可能な請求書フォーマット
- **請求ステータス管理**:
  - 未請求/請求済み/入金済みの管理
  - 請求書発行日の記録

**利用者**: 管理者、経理担当

---

## レポート・分析機能

### 22. レポート機能

**目的**: 業務データの可視化と分析

**機能**:
- 収集実績レポート（日次/月次/年次）
- 店舗別廃棄物排出量レポート
- 業者別収集実績レポート
- 品目別集計レポート
- 法令報告用データの出力
- グラフ・チャートでの可視化

**利用者**: 管理者、経営層

---

### 23. カレンダー表示

**目的**: 収集予定の視覚的管理

**機能**:
- 月次カレンダーでの予定表示
- 日別の収集予定一覧
- 業者別・店舗別のフィルター
- 予定の色分け表示（ステータス別）
- カレンダーからの予定登録

**利用者**: 全ユーザー

---

## セキュリティ・監査機能

### 24. 監査ログ（Audit Logs）

**目的**: システム操作の全履歴を記録し、トレーサビリティを確保

**機能**:
- 全ての重要操作を自動記録
- 操作者・操作日時・操作内容の記録
- 変更前後のデータ比較
- IPアドレス・ユーザーエージェントの記録
- ログの検索・フィルター機能
- ログのエクスポート機能

**利用者**: システム管理者（参照のみ）

---

### 25. アクセス制御（RBAC）

**目的**: ロールベースでのアクセス権限管理

**機能**:
- **Admin（管理者）**: 全機能へのアクセス
- **Emitter（排出事業者）**: 自社店舗・依頼管理のみ
- **Collector（収集業者）**: 割り当てられた収集予定・実績登録のみ
- 画面・機能レベルでの制御
- データレベルでの制御（Row Level Security）

**利用者**: システムが自動制御

---

### 26. 承認フロー（Approvals）

**目的**: 重要データの承認プロセス管理

**機能**:
- 収集予定の承認
- 収集実績の承認
- 承認者の指定
- 承認履歴の記録
- 差し戻し機能
- 承認待ちの通知

**利用者**: 管理者、承認権限者

---

## 新機能（2025年10月実装）

### 27. 一斉ヒアリング機能

**目的**: 複数の収集業者に対して一斉に情報収集・確認を実施

**機能**:
- **ヒアリングキャンペーン作成**:
  - タイトル・説明・回答期限の設定
  - 対象業者の選択
  - 対象店舗の事前設定
- **業者からの回答収集**:
  - チェックマーク形式での簡単回答
  - 店舗別の対応可否入力
  - コメント機能（2段階スレッド）
- **回答管理**:
  - 回答状況の一覧表示
  - 未回答業者の確認
  - 回答期限後の自動ロック
  - ロック解除申請フロー
- **リマインダー機能**:
  - 期限7日前、3日前、1日前の自動メール送信
  - 未回答業者への自動督促
- **集計・分析**:
  - 店舗別対応可能業者の集計
  - 回答率の表示
  - 結果のエクスポート

**利用者**: 管理者（キャンペーン作成）、収集業者（回答）

---

### 28. 外部店舗管理

**目的**: 自社以外の排出事業者の店舗情報を管理

**機能**:
- 外部店舗情報の登録
- 外部店舗の品目管理
- 外部店舗への収集予定登録
- 外部店舗の一覧表示・検索

**利用者**: 管理者

---

### 29. メール通知機能

**目的**: 重要イベントの自動通知

**機能**:
- 収集予定のリマインダー
- 実績登録の通知
- 承認依頼の通知
- ヒアリング回答依頼の通知
- 期限切れアラート
- Resend API による送信

**利用者**: 全ユーザー（自動送信）

---

## 技術スタック

### フロントエンド
- **Framework**: Next.js 14 (App Router)
- **UI Library**: Ant Design 5.x
- **Language**: TypeScript
- **State Management**: React Hooks
- **HTTP Client**: Fetch API

### バックエンド
- **Runtime**: Node.js
- **API**: Next.js API Routes (RESTful)
- **Validation**: Zod
- **ORM**: Prisma 5.x

### データベース
- **DBMS**: PostgreSQL (Supabase)
- **Schema**: Multi-schema (app, auth, public)
- **Row Level Security**: 有効化
- **Migration**: Prisma Migrate

### 認証・認可
- **Provider**: Supabase Auth
- **Session**: SSR Cookie-based
- **Authorization**: Row Level Security + RBAC

### インフラ
- **Hosting**: Vercel (推奨) / 任意のNode.js環境
- **Database**: Supabase (PostgreSQL)
- **Email**: Resend API
- **Storage**: Supabase Storage (画像保存)

### 開発・品質管理
- **Testing**: Playwright (E2E), Vitest (Unit)
- **Linting**: ESLint + TypeScript
- **Code Quality**: 
  - Schema 同期チェック
  - 外部キー制約チェック
  - TypeScript 型チェック
- **CI/CD**: 自動テスト・デプロイ対応

---

## 導入効果

### 業務効率化
- ✅ 紙ベースの管理から脱却 → **作業時間 70% 削減**
- ✅ 収集予定の自動割り当て → **計画立案時間 50% 削減**
- ✅ 実績登録の簡素化（モバイル対応）→ **現場作業負荷 40% 削減**

### コスト削減
- ✅ 請求処理の自動化 → **経理業務時間 60% 削減**
- ✅ エラー・漏れの削減 → **再処理コスト 80% 削減**
- ✅ 一元管理による人件費削減 → **年間 XX万円のコスト削減**

### コンプライアンス強化
- ✅ JWNET 完全連携 → **法令遵守 100% 達成**
- ✅ 監査ログによる完全トレーサビリティ → **監査対応時間 90% 削減**
- ✅ 証跡の自動保存（写真・伝票）→ **証拠保全の確実性向上**

### データ活用
- ✅ リアルタイムな業務状況把握 → **意思決定スピード向上**
- ✅ 詳細なレポート機能 → **経営判断の精度向上**
- ✅ 過去データの分析 → **業務改善のPDCAサイクル確立**

---

## サポート・保守

### 標準サポート
- 営業時間内のメールサポート
- 定期的なシステムアップデート
- セキュリティパッチの適用
- データバックアップ（日次）

### オプションサポート
- 24時間365日サポート
- 専任担当者の配置
- カスタマイズ対応
- オンサイトトレーニング

---

## お問い合わせ

本システムに関するご質問、デモのご依頼、導入のご相談は、以下までお気軽にお問い合わせください。

**開発元**: BABA株式会社  
**Email**: [info@example.com]  
**Tel**: [XXX-XXXX-XXXX]  
**Web**: [https://example.com]

---

**最終更新**: 2025年10月19日  
**Document Version**: 1.0.0

