-- ============================================================================
-- Seed: JWNET廃棄物コードマスター
-- ============================================================================
-- 目的: JWNET公式の廃棄物コード（サンプルデータ）
-- 作成日: 2025-10-13
-- ============================================================================

-- 既存データチェック
DO $$
BEGIN
  IF EXISTS (SELECT 1 FROM app.jwnet_waste_codes LIMIT 1) THEN
    RAISE NOTICE 'jwnet_waste_codes already has data. Skipping seed.';
  ELSE
    -- RLS無効化（管理者権限で実行）
    ALTER TABLE app.jwnet_waste_codes DISABLE ROW LEVEL SECURITY;

    -- サンプル廃棄物コード挿入
    INSERT INTO app.jwnet_waste_codes (
      waste_code,
      waste_name,
      waste_category,
      waste_type,
      unit_code,
      unit_name,
      is_active
    ) VALUES
    -- 燃え殻
    ('0010101', '石炭がら', '燃え殻', '石炭がら', '01', 'kg', true),
    ('0010102', 'コークス灰', '燃え殻', 'コークス灰', '01', 'kg', true),
    ('0010199', 'その他の燃え殻', '燃え殻', 'その他', '01', 'kg', true),
    
    -- 汚泥
    ('0020101', '有機性汚泥', '汚泥', '有機性汚泥', '01', 'kg', true),
    ('0020102', '無機性汚泥', '汚泥', '無機性汚泥', '01', 'kg', true),
    ('0020199', 'その他の汚泥', '汚泥', 'その他', '01', 'kg', true),
    
    -- 廃油
    ('0030101', '鉱物性油', '廃油', '鉱物性油', '02', 'L', true),
    ('0030102', '動植物性油', '廃油', '動植物性油', '02', 'L', true),
    ('0030199', 'その他の廃油', '廃油', 'その他', '02', 'L', true),
    
    -- 廃酸
    ('0040101', '無機酸', '廃酸', '無機酸', '02', 'L', true),
    ('0040102', '有機酸', '廃酸', '有機酸', '02', 'L', true),
    
    -- 廃アルカリ
    ('0050101', '無機アルカリ', '廃アルカリ', '無機アルカリ', '02', 'L', true),
    ('0050102', '有機アルカリ', '廃アルカリ', '有機アルカリ', '02', 'L', true),
    
    -- 廃プラスチック類
    ('0060101', '廃プラスチック類', '廃プラスチック類', '廃プラスチック', '01', 'kg', true),
    ('0060102', '発泡スチロール', '廃プラスチック類', '発泡スチロール', '01', 'kg', true),
    
    -- 紙くず
    ('0070101', '紙くず', '紙くず', '紙くず', '01', 'kg', true),
    
    -- 木くず
    ('0080101', '木くず', '木くず', '木くず', '01', 'kg', true),
    
    -- 繊維くず
    ('0090101', '繊維くず', '繊維くず', '繊維くず', '01', 'kg', true),
    
    -- 動植物性残さ
    ('0100101', '動物性残さ', '動植物性残さ', '動物性残さ', '01', 'kg', true),
    ('0100102', '植物性残さ', '動植物性残さ', '植物性残さ', '01', 'kg', true),
    
    -- 動物系固形不要物
    ('0110101', '動物系固形不要物', '動物系固形不要物', '動物系固形不要物', '01', 'kg', true),
    
    -- ゴムくず
    ('0120101', 'ゴムくず', 'ゴムくず', 'ゴムくず', '01', 'kg', true),
    
    -- 金属くず
    ('0130101', '鉄くず', '金属くず', '鉄くず', '01', 'kg', true),
    ('0130102', '非鉄金属くず', '金属くず', '非鉄金属', '01', 'kg', true),
    
    -- ガラスくず、コンクリートくず及び陶磁器くず
    ('0140101', 'ガラスくず', 'ガラスくず等', 'ガラスくず', '01', 'kg', true),
    ('0140102', 'コンクリートくず', 'ガラスくず等', 'コンクリートくず', '01', 'kg', true),
    ('0140103', '陶磁器くず', 'ガラスくず等', '陶磁器くず', '01', 'kg', true),
    
    -- がれき類
    ('0150101', 'コンクリートがら', 'がれき類', 'コンクリートがら', '01', 'kg', true),
    ('0150102', 'アスファルトがら', 'がれき類', 'アスファルトがら', '01', 'kg', true),
    
    -- 動物のふん尿
    ('0160101', '牛のふん尿', '動物のふん尿', '牛のふん尿', '01', 'kg', true),
    ('0160102', '豚のふん尿', '動物のふん尿', '豚のふん尿', '01', 'kg', true),
    
    -- 動物の死体
    ('0170101', '動物の死体', '動物の死体', '動物の死体', '01', 'kg', true),
    
    -- ばいじん
    ('0180101', 'ばいじん', 'ばいじん', 'ばいじん', '01', 'kg', true),
    
    -- 処分するために処理したもの（13号廃棄物）
    ('0190101', '固形化物', '13号廃棄物', '固形化物', '01', 'kg', true),
    ('0190102', '中和処理物', '13号廃棄物', '中和処理物', '01', 'kg', true),
    
    -- 一般廃棄物
    ('0200101', '可燃ごみ', '一般廃棄物', '可燃ごみ', '01', 'kg', true),
    ('0200102', '不燃ごみ', '一般廃棄物', '不燃ごみ', '01', 'kg', true),
    ('0200103', '粗大ごみ', '一般廃棄物', '粗大ごみ', '01', 'kg', true),
    
    -- 資源ごみ
    ('0210101', '缶', '資源ごみ', '缶', '01', 'kg', true),
    ('0210102', '瓶', '資源ごみ', '瓶', '01', 'kg', true),
    ('0210103', 'ペットボトル', '資源ごみ', 'ペットボトル', '01', 'kg', true),
    ('0210104', '段ボール', '資源ごみ', '段ボール', '01', 'kg', true);

    RAISE NOTICE '✅ Seeded % jwnet_waste_codes', (SELECT COUNT(*) FROM app.jwnet_waste_codes);

    -- RLS再有効化
    ALTER TABLE app.jwnet_waste_codes ENABLE ROW LEVEL SECURITY;
  END IF;
END $$;

